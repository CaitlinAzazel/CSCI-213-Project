@page "/pets"
@using AnniesCatSanctuary.Services
@using AnniesCatSanctuary.Data
@inject PetManagementService PetManagementService
@inject PetFavoritesService PetFavoritesService

<h3>Available Pets</h3>

<ul>
    @foreach (var pet in pets.Where(p => !p.IsHidden))
    {
        <li>
            <strong>@pet.Name</strong> - @pet.Type
            <button @onclick="() => ToggleFavorite(pet.Name)">
                @(favoritePets.Contains(pet.Name) ? "Unfavorite" : "Favorite")
            </button>
        </li>
    }
</ul>

@code {
    private List<Pet> pets = new List<Pet>();
    private List<string> favoritePets = new List<string>();

    protected override void OnInitialized()
    {
        pets = PetManagementService.GetPets();
        favoritePets = PetFavoritesService.GetFavoritePets();
    }

    private void ToggleFavorite(string petName)
    {
        PetFavoritesService.ToggleFavorite(petName);
        favoritePets = PetFavoritesService.GetFavoritePets();
    }
}
