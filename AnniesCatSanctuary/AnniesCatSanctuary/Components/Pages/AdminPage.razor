@page "/admin"
@using AnniesCatSanctuary.Services
@using AnniesCatSanctuary.Data
@inject PetManagementService PetManagementService

<h3>Admin - Manage Pets</h3>

<h4>Add a Pet</h4>
<div>
    <label for="petName">Pet Name</label>
    <input type="text" id="petName" @bind="newPet.Name" />
</div>
<div>
    <label for="petType">Pet Type</label>
    <input type="text" id="petType" @bind="newPet.Type" />
</div>
<div>
    <label for="petDescription">Pet Description</label>
    <textarea id="petDescription" @bind="newPet.Description"></textarea>
</div>
<button @onclick="AddPet">Add Pet</button>

<h4>Current Pet List</h4>
<ul>
    @foreach (var pet in pets)
    {
        <li>
            <strong>@pet.Name</strong> - @pet.Type
            <button @onclick="() => RemovePet(pet)">Remove</button>
            <button @onclick="() => HidePet(pet)">Hide</button>
        </li>
    }
</ul>

@code {
    private List<Pet> pets = new List<Pet>();
    private Pet newPet = new Pet();

    protected override void OnInitialized()
    {
        pets = PetManagementService.GetPets();
    }

    private void AddPet()
    {
        if (!string.IsNullOrWhiteSpace(newPet.Name) && !string.IsNullOrWhiteSpace(newPet.Type))
        {
            PetManagementService.AddPet(newPet);
            pets = PetManagementService.GetPets();
            newPet = new Pet();
        }
    }

    private void RemovePet(Pet pet)
    {
        PetManagementService.RemovePet(pet);
        pets = PetManagementService.GetPets();
    }

    private void HidePet(Pet pet)
    {
        PetManagementService.HidePet(pet);
        pets = PetManagementService.GetPets();
    }
}
